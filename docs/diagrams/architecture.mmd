%% Diagrama de arquitectura - Sistema Asesoría IUT
%% Descripción: componentes principales y cómo se comunican

flowchart TB
  subgraph Cliente
    browser["Navegador (cliente)"]
  end

  subgraph Web
    web[Nginx / Apache]
  php["PHP-FPM -> Laravel app"]
  vite["Vite - assets / Dev Server"]
  end

  subgraph Backend
  app["Laravel Application\nControllers, Models, Jobs, Queues"]
  queue["Queue Worker - Jobs" ]
  storage["Storage - files"]
  mail["Mail - SMTP / Servicios externos"]
  end

  subgraph DB
  mysql["MySQL database"]
  end

  browser -->|HTTP/HTTPS| web
  web --> php
  php --> app
  vite -->|serves assets| browser
  app -->|read/write| mysql
  app -->|push jobs| queue
  queue -->|process jobs| app
  app -->|store files| storage
  app -->|send emails| mail

  classDef infra fill:#f5f5f5,stroke:#333,stroke-width:1px
  class Web,Backend,DB infra

  %% click mysql not included - configurar .env (DB_CONNECTION=mysql)

  %% Notas:
  %% - Auth personalizado usa tabla `usuarios` y campo `correo` como identificador.
  %% - Vite se usa para assets; en desarrollo el dev server sirve los JS/CSS.
  %% - Jobs/Queue se ejecutan con workers (artisan queue:work o procesos manejados por supervisor).
